# handlers/messages.py
from telegram import Update
from telegram.constants import ParseMode
from telegram.ext import ContextTypes
from utils.db import get_membership_level

async def handle_text_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """
    处理所有文本消息，自动提示激活码领取
    """
    user_id = update.effective_user.id
    membership_level = get_membership_level(user_id)
    if not membership_level:
        await update.message.reply_text("🎉 新用户欢迎！请联系管理员领取激活码以体验初级会员权限。")
